<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE aspectran PUBLIC "-//ASPECTRAN//DTD Aspectran Configuration 6.0//EN"
        "http://aspectran.github.io/dtd/aspectran-6.dtd">
<aspectran>

    <settings>
        <setting name="transletNamePattern" value="memo-*"/>
    </settings>

    <translet name="list">
        <action bean="memoAction" method="getList"/>
        <transform type="transform/json"/>
    </translet>

    <translet name="add">
        <parameters>
            <item name="message" mandatory="true"/>
        </parameters>
        <action bean="memoAction" method="addMemo"/>
        <transform type="transform/json"/>
    </translet>

    <translet name="add ${message}">
        <action id="affected" bean="simpleSqlSession" method="insert">
            <arguments>
                <item>memo.insertMemo</item>
                <item type="map">
                    <value name="message">${message}</value>
                </item>
            </arguments>
        </action>
        <transform type="transform/json"/>
    </translet>

    <translet name="del">
        <parameters>
            <item name="id" mandatory="true"/>
        </parameters>
        <action bean="memoAction" method="delMemo"/>
        <transform type="transform/json"/>
    </translet>

    <translet name="del ${id}">
        <action bean="memoAction" method="delMemo"/>
        <transform type="transform/json"/>
    </translet>

    <translet name="del-all">
        <action id="affected" bean="memoAction" method="delAllMemo"/>
        <transform type="transform/text">
            <template style="apon">
                |---------------------------------
                | Total deleted records: @{affected}
                |---------------------------------
            </template>
        </transform>
    </translet>

    <translet name="add-bulk">
        <parameters>
            <item name="repetitions" mandatory="true" defaultValue="10"/>
            <item name="message" mandatory="true"/>
        </parameters>
        <action id="affected" bean="memoAction" method="addBulkMemo"/>
        <transform type="transform/text">
            <template style="apon">
                |---------------------------------
                | Total inserted records: @{affected}
                |---------------------------------
            </template>
        </transform>
    </translet>

    <translet name="add-bulk ${message}">
        <parameters>
            <item name="repetitions" mandatory="true" defaultValue="10"/>
        </parameters>
        <action id="affected" bean="memoAction" method="addBulkMemo"/>
        <transform type="transform/text">
            <template style="apon">
                |---------------------------------
                | Total inserted records: @{affected}
                |---------------------------------
            </template>
        </transform>
    </translet>

</aspectran>